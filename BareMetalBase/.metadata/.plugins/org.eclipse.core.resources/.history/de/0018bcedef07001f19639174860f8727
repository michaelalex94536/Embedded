// Nucleo-F411RE board user LED toggle


// Q: Where is the user LED?
// A: It's on Port A, pin 5 [PA5] on the AHB1 bus

/* So we need to enable the AHB1 bus clock and the settings for Port A, pin 5
 *
 * We have to enable the AHB1 bus clock and make pin 5 of GPIOA an output
 *
 *
 * */

// Construct relevant memory addresses based on memory map in data sheet and reference manuals

#define PERIPH_BASE				0x40000000UL 								// Base address for all peripherals (Page 54 of data sheet)
#define AHB1_PERIPH_OFFSET		0x00020000UL								// Offset (from base) for AHB1 peripherals
#define AHB1_PERIPH_BASE		(PERIPH_BASE + AHB1_PERIPH_OFFSET)
#define GPIOA_OFFSET			0x0UL
#define GPIOA_BASE				(AHB1_PERIPH_BASE + GPIOA_OFFSET)			// Can be found directly in reference manual, page 38

#define RCC_OFFSET				0x3800UL
#define RCC_BASE				(AHB1_PERIPH_BASE + RCC_OFFSET)				// Can be found directly in reference manual, page 38

#define AHB1EN_R_OFFSET			0x30UL										// Offset for AHB1 enable register (Page 136 of reference manual)
#define RCC_AHB1EN_R			(RCC_BASE + AHB1EN_R_OFFSET)				// AHB1 bus clock enable register address

int main(void)
{
    /* Loop forever */
	for(;;);
}
